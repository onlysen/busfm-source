<!doctype html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
		<title>luoo radio bus v2</title>
		<link href="../css/public.css" rel="stylesheet" type="text/css" />
		<style type="text/css">
			html,body{height:100%; overflow-y:hidden; background:#f4f4f4 none;}
			body{background:url(../image/bg.png) -110px -130px no-repeat transparent;}
			ul{list-style:none;}
			.statusbar{ height:54px; width:100%; position:absolute; bottom:14px; left:0; overflow:visiable; white-space:nowrap; background:#fff url(../image/dbradio2.png) 0 -48px repeat-x; }
			.statusbar div{float:left; height:44px; line-height:40px;}
			#coverimg{width:113px; height:113px; position:absolute; bottom:17px; left:100px; background:transparent url(../image/cover.png) no-repeat 0 0; }
			#coverimg img{ width:103px; height:103px; margin:5px;}
			
			/*player*/
			.player-area{height:44px; margin-left:220px;}
			#jplayer_control a span{display:inline-block; width:18px; height:44px; background:transparent url(../image/dbradio2.png) no-repeat -46px -1px;filter:alpha(opacity=60); opacity:0.6;}
			#jplayer_control a:hover span{filter:alpha(opacity=100); opacity:1;}
			#jplayer_control #jplayer_pause span{background-position:-64px -1px;}
			#jplayer_control #jplayer_next span{background-position:-82px -1px;}
			#jplayer_control #fav span{background-position:-102px -1px;}
			#jplayer_control #fav span.star{background-position:-120px -1px; filter:alpha(opacity=100); opacity:1;}
			
			#jplayer_control span.sep{display:inline-block; width:5px; height:44px; background:url("../image/dbradio2.png") no-repeat scroll -37px -1px transparent;}
			
			/*plus*/
			#jplayer_control #user_ico span{background-position:-156px -1px;}
			#jplayer_control #channel_ico span{background-position:-139px -1px;}
			.bar-right{position:absolute; right:8px;}
			
			#SongInfo, #PlayInfo{font:400 12px/1 微软雅黑,Arial; color:#444; margin-left:40px; cursor:default; line-height:40px;}
			#SongInfo:hover{color:#080;}
			#PlayInfo{ position:absolute; right:66px;}
			
			#sidebar{ position:absolute; right:0; top:10%; background:url(../image/vsep.png) repeat-y scroll 0 0 transparent; width:250px;  height:70%; overflow:hidden;}
			#sidebar-switch{position:absolute; top:45%; left:2px; height:16px; overflow:hidden; width:16px; cursor:pointer; background:url(../image/collapse.png) -2px 0 no-repeat transparent;}
			#channel-list{width:150px; text-align:center; position:absolute; left:50px; top:30%;}
			#channel-list li{ width:100px; border:1px solid #d6d6d7; margin:10px auto; padding:3px 0; color:#555; cursor:pointer;-moz-border-radius: 5px;-khtml-border-radius: 5px;-webkit-border-radius:5px;border-radius:5px;}
			#channel-list li:hover{background:#ccc;}
			#user-panel{color:gray; width:200px; position:absolute; top:80%; left:50px; filter:alpha(opacity=0); opacity:0;}
			#user-panel li{height:22px; line-height:22px; width:155px;}
			.graybtn{border:gray 1px solid; background:#eee; color:#555; padding:2px 18px;}
			.loginTxt{width:155px; border:1px solid #bbb; color:gray;}
			.regli a{color:gray;}
			.regli a:hover{text-decoration:underline;}
			#u-info,#u-reg,#lblmsg{display:none;}
			
			/*validation*/
			#lblmsg,#loginmsg{border:none; background:#fdd; margin-bottom:8px;color:red;font-weight:600; text-align:center; height:auto!important;}
			#loginmsg{border:1px solid #dbb; filter:alpha(opacity=0);opacity:0;}
			.onerror{border:1px solid red;}
			
			/*user*/
			#u-info li{overflow: visible; white-space: nowrap;}
			
			/*favrate area*/
			@font-face {
				font-family: 'CodeLightRegular';
				src: url('codelight-webfont.eot');
				src: local('Code Light'), local('CodeLight'), url('../css/font/codelight-webfont.woff') format('woff'), url('../css/font/codelight-webfont.ttf') format('truetype'), url('../css/font/codelight-webfont.svg#webfontqLOSVwJT') format('svg');
				font-weight: normal;
				font-style: normal;
			}
			#favlist{position:absolute; top:50px; left:250px; width:700px; height:300px; font:34px "CodeLightRegular","segoe ui light","century gothic regular","华文细黑","courier new";  overflow:hidden; color:#555;}
			#favlist ul{position:absolute;top:0; left:0;}
			#favlist div{position:relative;}
			#favlist #list-top{position:absolute; top:0; left:50%; height:20px; width:20px; background:transparent url(../image/arr.png) -2px 0 no-repeat; cursor:pointer; z-index:1000;}
			#favlist #list-bottom{position:absolute; bottom:0; left:50%; height:20px; width:20px; background:transparent url(../image/arr.png) -28px 0 no-repeat; cursor:pointer; z-index:1000; display:none;}
			
			/*popalert*/
			#msgs{position: absolute; top:0; left:48%; height:28px;line-height:28px; opacity:0; filter:alpha(opacity=0);}
			#msgs span{display:inline-block; height:100%;}
			#msgs .left{background:transparent url(../image/leaf2.png) 0 0 no-repeat; width:17px;}
			#msgs .cont{background:#325f4a; color:#fff;}
			#msgs .right{background:transparent url(../image/leaf2.png) -17px 0 no-repeat; width:17px;}
		</style>
		<!--[if IE 6]>
		<link href="../ie6sucks.css" rel="stylesheet" type="text/css" />
		<style type="text/css">
			body{background-image:url(../image/ie6/bg.gif)}
			#coverimg{background-image:url(../image/ie6/cover.gif); }
			#jplayer_control a{cursor:pointer;}
			.player-area{margin-left:110px;}
			#favlist #listcover{position:static;}
			#msgs .left{background-image:url(../image/leaf2.gif);}
			#msgs .right{background-image:url(../image/leaf2.gif);}
			#favlist div{font-size:0px;}
		</style>
		<![endif]-->
	</head>
<body style="position:relative;">
	<div id="jp"></div>
	<div id="debugdiv" style="float:right;">
		<a hidefocus href="#" id="toggleDebug">debug</a>
		<span></span>
	</div>
	<div class="statusbar">
		<div id="coverimg">
			<img src="../image/nir.jpg" alt="" />
		</div>
		<div class="player-area">
			<div id="jplayer_control">
				<span class="sep"></span>
				<a hidefocus href="#" id="jplayer_previous" style="display:none;"><span></span></a>
				<a hidefocus href="#" id="jplayer_play"><span></span></a>
				<a hidefocus href="#" id="jplayer_pause"><span></span></a>
				<a hidefocus href="#" id="jplayer_stop" style="display:none;"><span></span></a>
				<a hidefocus href="#" id="jplayer_next"><span></span></a>
				<a hidefocus href="#" id="jplayer_vmin" style="display:none;"><span></span></a>
				<a hidefocus href="#" id="jplayer_vbar" style="display:none;"><span></span></a>
				<a hidefocus href="#" id="jplayer_vmax" style="display:none;"><span></span></a>
				<span class="sep"></span>
				<a hidefocus href="#" id="fav"><span></span></a><!--[if lt ie 8]>&nbsp;<![endif]-->
				<span class="sep"></span>
				<span class="bar-right">
					<span class="sep"></span>
					<a hidefocus href="#" id="channel_ico"><span></span></a>
					<a hidefocus href="#" id="user_ico"><span></span></a>
				</span>
			</div>
			<div id="SongInfo">
				<span id="BandName">Unknown Artist</span>&nbsp;-&nbsp;<span id="nowplaying">Unknown Music</span>
				&nbsp;-&nbsp;<span id="albumname">Unknown Album</span>
			</div>
			<div id="PlayInfo">
				<span id="pt">00:00</span>/<span id="tt">00:00</span>
				<p style="display:none">loadPercent：<span id="lp"></span>
				<span id="ppr"></span>/<span id="ppa"></span></p>
			</div>
		</div>
	</div>
	<div id="jplayer_playlist" style="display:none;">
		<ul>
			<!-- The function displayPlayList() uses this unordered list -->
			<li></li>
		</ul>
	</div> 
	<div id="sidebar">
		<div id="sidebar-switch"></div>
		<div id="channel-list">
			<ul>
				<li>深沉黑色</li>
				<li>忧郁灰色</li>
				<li>明快白色</li>
				<li>个人特色</li>
			</ul>
		</div>
		<div id="user-panel">
			<form id="form1" name="form1" action="/luoo/v2" method="post">			
				<ul id="u-login">
					<li>您的E-mail地址：</li>
					<li><input type="text" value="" class="loginTxt" maxlength="40" id="txtemail" name="txtemail" /></li>
					<li>您的注册密码：</li>
					<li><input type="password" value="" class="loginTxt" maxlength="20" id="txtpwd" name="txtpwd" /></li>
					<li><input type="checkbox" id="cbxCookie" checked /><label for="cbxCookie">记住我，下次自动登录</label></li>
					<li style="height:30px; line-height:30px; text-align:center;"><input type="submit" value="登&nbsp;录" class="graybtn" /></li>
					<li class="regli"><a href="javascript:void(0);" style="float:right;" onclick="getpwd();">忘记密码？</a><a href="javascript:void(0);" onclick="getaccount();">没有账号？</a></li>
					<li id="loginmsg"></li>
				</ul>
			</form>
			<form id="form2" name="form2" action="/luoo/v2" method="post">
				<ul id="u-reg">
					<li>您的E-mail地址：</li>
					<li><input type="text" value="" class="loginTxt txtreg" maxlength="40" id="txtemail_r" name="txtemail_r" /></li>
					<li>您的注册密码：</li>
					<li><input type="password" value="" class="loginTxt txtreg" maxlength="20" id="txtpwd_r" name="txtpwd_r" title="6-20位字母和数字" /></li>
					<li>请再输一次：</li>
					<li><input type="password" value="" class="loginTxt txtreg" maxlength="20" id="txtpwd_r2" name="txtpwd_r2" /></li>
					<li style="text-align:center;"><input type="submit" value="确&nbsp;定" class="graybtn" /></li>
					<li class="regli"><center><a href="javascript:void(0);" onclick="goLogin();">已经有账号？</a></center></li>
					<li id="lblmsg"><p></p><p></p><p></p><p></p><p></p><p></p></li>
				</ul>
			</form>
			<ul id="u-info">
				<li>您好：<span>walker</span></li>
				<li>您共收藏了<span id="favcount">37</span>首歌曲</li>
				<li>总收听时长<span id="timecount">103小时52分13秒</span></li>
				<li>共发布92条心情</li>
				<li><a href="javascript:logout();">离开</a></li>
			</ul>
		</div>
	</div>
	<div id="favlist">
		<ul>
			<li>sude – live at denmark</li>
			<li>Orenda Fink – The Garden </li>
			<li>Headlights – Love Song for Buddy</li>
			<li>Bears – Losing My Love</li>
			<li>Azure Ray – Silver Sorrow</li>
			<li>Sara Lov – Tell Me How</li>
			<li>Art in Manila – I Thought I Was Free</li>
			<li>The Watson Twins – Tell Me Why</li>
			<li>Sara Lov – Tell Me How</li>
			<li>Art in Manila – I Thought I Was Free</li>
			<li>The Watson Twins – Tell Me Why</li>
			<li>sude – live at denmark</li>
			<li>Orenda Fink – The Garden </li>
			<li>Headlights – Love Song for Buddy</li>
			<li>Bears – Losing My Love</li>
			<li>左小祖咒 – 我不能悲伤地坐在你的身旁</li>
			<li>腰 – 公路之光</li>
			<li>声音玩具 – 艾玲</li>
			<li>范晓萱 – You Are My Sunshine</li>
		</ul>
		<div id="list-top"></div>
		<div id="list-bottom"></div>
	</div>
	<div id="msgs"><span class="left">&nbsp;</span><span class="cont">FDASFSDAFDSAF</span><span class="right">&nbsp;</span></div>
</body>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery.jplayer.min.js"></script>
<script type="text/javascript" src="../js/playControl.js"></script>
<script type="text/javascript" src="../js/jquery.mousewheel.min.js"></script>
<script type="text/javascript">
	$(function(){
		$("#sidebar-switch").click(function(){
			var o=$(this);
			var s=$("#sidebar");
			if(s.css("right")=="0px")
				s.animate({right:-220},1000,function(){o.css({"background-position":"-2px -30px"});});
			else
				s.animate({right:0},1000,function(){o.css({"background-position":"-2px -0px"});});
		});
		$("#fav").click(function(){
			var s=$("span",this).toggleClass("star");//发布时改成ajax
			if(s.is(".star")) popAlert("收藏成功");
		});
		$("#channel_ico").click(function(){
			var o=$("#channel-list");
			checkSideBar();
			if(o.css("opacity")==0){//频道拉下来
				o.animate({"opacity":1,top:"30%"},1000);
				$("#user-panel").animate({"opacity":0,top:"80%"},1000,false);
			}
		});
		$("#user_ico").click(function(){
			var o=$("#user-panel");
			checkSideBar();
			if(o.css("opacity")==0){//把个人区拉上来
				$("#channel-list").animate({"opacity":0,top:"10%"},1000);
				o.animate({"opacity":1,top:"30%"},1000,false);
			}
		});
		//收藏列表加渐淡效果
		var listheight=300;//列表高度
		var fontsize=34;
		var c=$("#favlist").css({height:listheight,fontSize:fontsize});
		var nheight=120;//绝对透明区域高度
		var forcount=1-((listheight-nheight)/4/100);//计算透明度中止值
		for(var i=1;i>forcount;i-=0.01){
			$("<div/>",{
				css:{height:2,opacity:i,backgroundColor:"#f4f4f4"}
			}).appendTo(c);
		}
		$("<div/>",{
			css:{height:nheight,opacity:0,backgroundColor:"#fff"}
		}).appendTo(c);
		for(var i=forcount;i<=1;i+=0.01){
			$("<div/>",{
				css:{height:2,opacity:i,backgroundColor:"#f4f4f4",width:"100%"}
			}).appendTo(c);
		}
		// 列表滚动
		var fu=$("ul",c);
		var heightall=fu.height();
		var heidiff=heightall-listheight+fontsize;
		var ltta=$("#list-top");
		var ltba=$("#list-bottom");
		var lock=false;
		var speed=300;
		$("#list-top").live("click",function(){if(heidiff<=0) return;lock=true; fu.animate({top:"-=50px"},speed,function(){lock=false; heidiff-=50;if(heidiff>0) ltba.show();else ltta.hide();});});
		$("#list-bottom").live("click",function(){var t=Number(fu.css("top").replace(/px/,''));if(t>=fontsize) return; lock=true; fu.animate({top:"+=50px"},speed,function(){lock=false; heidiff+=50;t=Number(fu.css("top").replace(/px/,'')); if(t<fontsize) ltta.show();else ltba.hide();});});
		$(c).mousewheel(function(e,d){if(!lock){ speed=30; if(d<0) ltta.trigger("click"); else ltba.trigger("click"); speed=300;}});
	});
	//把侧栏抽出
	function checkSideBar(){var s=$("#sidebar");if(s.css("right")!="0px") s.animate({right:0},1000,function(){$("#sidebar-switch").css({"background-position":"-2px 0"});});}
	function getpwd(){/*send a e-mail with new password*/}
	function getaccount(){$("#u-login").slideUp(1000);$("#u-reg").slideDown(1000);}
	function goLogin(){$("#u-login").slideDown(1000);$("#u-reg").slideUp(1000);}
	
	//注册逻辑
	var vali=true;
	var em_p=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
	$("#txtemail_r").blur(function(){var o=$(this);if(o.val()==o.data("otxt")){ifvali(true,o); return;} if(o.val()==""||!(em_p.test(o.val()))) ifvali(false,o,'邮件地址不正确'); else{if(false) ifvali(false,o,'该邮件地址已存在'); else /*ajax查询邮件能注册*/ifvali(true,o);}});
	$("#txtpwd_r").blur(function(){var o=$(this);if(o.val()==o.data("otxt")){ifvali(true,o); return;} if(o.val()==""||!(/^[0-9a-zA-Z]{6,20}$/.test(o.val()))) ifvali(false,o,'密码6-20位数字和字母'); else ifvali(true,o);});
	$("#txtpwd_r2").blur(function(){var o=$(this);if(o.val()==o.data("otxt")){ifvali(true,o); return;} if(o.val()!=$("#txtpwd_r").val()) ifvali(false,o,'密码输入不一致'); else ifvali(true,o);});
	$("#form2").live("submit",function(e){
		$(".txtreg").blur();
		if(!vali) e.preventDefault();
		else{
			$("#lblmsg").hide();
		}
	});
	//登录
	$("#form1").live("submit",function(e){
		if($("#txtemail").val()==""||$("#txtpwd").val()=="") loginmsg("登录信息无效");else{
			if(false) loginmsg("登录失败");
			else{
				//TODO:写入个人信息
				$("#u-login").slideUp(1000);$("#u-info").slideDown(1000);
			}
		}
		e.preventDefault();
	});
	function loginmsg(msg){$("#loginmsg").css({opacity:1}).text(msg).animate({opacity:0},3000,false);}
	//退出登录
	function logout(){
		//TODO:清除cookie
		$("#u-login").slideDown(1000);$("#u-info").slideUp(1000);
	}
	/*
	*b是否验证通过，o，对应的文本框对象，t，错误提示
	*/
	function ifvali(b,o,t){
		var m=$("#lblmsg");	
		var i=o.parent("li").index();//根据索引确定相应的提示框的索引
		var p=$("p",m).eq(i);
		t=t||"";
		if(b){//通过验证
			o.removeClass("onerror");
			o.data({"otxt":o.val()});
		}else{// 未通过验证
			vali=false;
			m.show();
			o.addClass("onerror");
		}
		p.text(t);
	}
	//弹出提示信息
	var alertlock=false;
	function popAlert(msg){
		if(alertlock){setTimeout(function(){popAlert(msg);},1000);return;}
		alertlock=true;
		$("#msgs").find(".cont").text(msg).end().animate({top:"30%",opacity:0.8},2500).animate({opacity:0},2500,function(){$(this).css({top:0}).find(".cont").text("");alertlock=false;});
	}
</script>
</html>