<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
		<title>巴士电台-bug提交反馈系统</title>
		<link href="/css/form.css?v=0.1" rel="stylesheet" type="text/css" />
		<style type="text/css">
			.buglist{border-color:#fff; width:120px;}
			.edit{border-color:gray;}
		</style>
	</head>
<body>
	<form id="form1" name="form1" action="bug.php" method="post">
		<div id="dtitle">个人资料</div>
		<ul>
			<li><span class="lititle">昵称：</span><input type="text" des="请填入您想使用的昵称" name="email" id="email" maxlength="20" class="buglist" value="匿名用户" /><span class="tips"></span></li>
			<li><span class="lititle">邮件地址：</span><input type="text" des="暂未开放修改邮箱功能" name="email" id="email" maxlength="20" class="buglist" value="walker" /><span class="tips"></span></li>
			<li><span class="lititle">注册时间：</span><label des="" name="env" id="env" maxlength="20" class="buglist" value="2010-12-13"></label><span class="tips"></span></li>
			<li><span class="lititle">收听时长：</span><label des="" name="env" id="env" maxlength="20" class="buglist" value="3583分钟"></label><span class="tips"></span></li>
			<li><span class="lititle">收藏曲目：</span><label des="" name="env" id="env" maxlength="20" class="buglist" value="查看"></label><span class="tips"></span></li>
			<!--li><span class="lititle">&nbsp;</span><input type="submit" id="btnok" value="提交" /-->
		</ul>
	</form>
</body>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script type="text/javascript">
$(function(){
	var em_p=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
	var vali=true;
	$("#ddlFunc").change(function(){if($(this).val()=="-1")$("#opration").show();else $("#opration").hide();})
	.focus(function(){$("#opration").triggerHandler('focus');})
	.blur(function(){if($(this).val()!="-1"){$(this).nextAll(".tips").text("输入正确").removeClass("onfocus onfocus").addClass("onpass");}else{$("#opration").focus();}});
	$(".buglist").focus(function(){var o=$(this); o.nextAll(".tips").text(o.attr("des")).removeClass("onerror onpass").addClass("onfocus").show();});
	$("#email").blur(function(){var o=$(this);var t=o.nextAll(".tips"); var v=o.val();if(v==""||!em_p.test(v)){t.text("邮件地址不可为空，或必须拥有合法的格式").removeClass("onfocus onpass").addClass("onerror");vali=false;}else{t.text("输入正确").removeClass("onerror onfocus").addClass("onpass");}});
	$("#env").blur(function(){$(this).nextAll(".tips").text("输入正确").removeClass("onfocus").addClass("onpass");});
	$("#opration").blur(function(){var t=$(this).nextAll(".tips");if($("#ddlFunc").val()=="-1"&&$(this).val()==""){t.text("请描述您进行的操作").removeClass("onpass onfocus").addClass("onerror");vali=false;}else{t.text("输入正确").removeClass("onerror onfocus").addClass("onpass");}});
	$("#describ").blur(function(){var o=$(this);var t=o.nextAll(".tips"); if(o.val()==""){t.text("问题描述不可为空，请详细描述操作时的细节或行为").removeClass("onfocus onpass").addClass("onerror");vali=false;}else{t.text("输入正确").removeClass("onerror onfocus").addClass("onpass");}});
	$("#form1").submit(function(e){
		$(".buglist").blur();
		if(!vali){
			e.preventDefault();
		}
		vali=true;
	});
	$("body").queue([]);
	$("#dtitle").queue([]);
	$("#dtitle").click(function(){
		$("body").queue(function(n){$.get("test.php?t="+new Date().getMilliseconds(),function(){
			n();
			console.log("A:"+$("body").queue().length+","+$("#dtitle").queue().length);
		});});
		$(this).queue(function(n){$.get("test.php?t="+new Date().getMilliseconds(),function(){
			n();
			console.log("B:"+$("body").queue().length+","+$("#dtitle").queue().length);
		});});
	});
});
</script>
</html>